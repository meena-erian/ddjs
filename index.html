<!DOCTYPE html>
<html>
<head>
<script>
	var pointerToDragedObject = undefined;
    var lx=-1;
	var ly=0;
    function objectMouseDown(object) {
    	pointerToDragedObject = object;
		console.log('object pointer saved');
    }
    function objectMouseUp(event) {
    }
	function windowMouseDown(event, w) {
		console.log(w);
		console.log('checking object pointer');
    	if(pointerToDragedObject && lx==-1) {
        	lx = event.pageX - w.offsetLeft;
            ly = event.pageY - w.offsetTop;
			console.log('object starting location saved');
        }
    }
    function windowMouseUp(event) {
		if(pointerToDragedObject) {
			pointerToDragedObject = undefined;
			lx=-1;
			console.log('object released');
		}
    }
    function windowMouseMove(event, w) {
    	if(pointerToDragedObject!=undefined) {
        	var nX = parseInt(pointerToDragedObject.style.left) + (event.pageX - lx - w.offsetLeft);
            var nY = parseInt(pointerToDragedObject.style.top) + (event.pageY - ly - w.offsetTop);
			console.log('object moved from (' + pointerToDragedObject.style.left + "," + pointerToDragedObject.style.top + ") to (" + nX + "px," + nY + "px)");
        	pointerToDragedObject.style.left = nX + "px";
            pointerToDragedObject.style.top = nY + "px";
            lx = event.pageX - w.offsetLeft;
            ly = event.pageY - w.offsetTop;
        }
        var c = document.getElementById('coord');
        c.innerHTML = "X:"+(event.pageX - w.offsetLeft)+"<br>Y:"+(event.pageY - w.offsetTop);
    }
</script>
	<style>
    	#game-window {
        	position:absolute;
            width:70%;
            height:800px;
            background: lightgray;
            margin:50px;
        }
        .dragable {
        	position:absolute;
            width:50px;
            height:50px;
            background:blue;
        }
        .dragable:hover {background:lightblue;}
    </style>
</head>
<body style="text-align:center;">
	<div id='game-window' onmousemove='windowMouseMove(event,this)' onmousedown='windowMouseDown(event,this)' onmouseup='windowMouseUp(event)'>
		<div style = "top:30px;left:100px;"class='dragable' onmousedown='objectMouseDown(this)' onmouseup='objectMouseUp(event)'></div>
		<div style = "top:70px;left:300px;"class='dragable' onmousedown='objectMouseDown(this)' onmouseup='objectMouseUp(event)'></div>
		<div style = "top:70px;left:400px;"class='dragable' onmousedown='objectMouseDown(this)' onmouseup='objectMouseUp(event)'></div>
		<div style = "top:70px;left:500px;"class='dragable' onmousedown='objectMouseDown(this)' onmouseup='objectMouseUp(event)'></div>
		<div style = "top:70px;left:600px;"class='dragable' onmousedown='objectMouseDown(this)' onmouseup='objectMouseUp(event)'></div>
		<p id='coord' style="position:relative;top:400px;"></p>
	</div>
</body>

</html>
